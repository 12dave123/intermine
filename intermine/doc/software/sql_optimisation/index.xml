<?xml version="1.0"?>

<article>

<artheader>
	<date>2002-12-2</date>
	<title>Flymine - SQL Query Optimisation</title>
	<authorgroup>
		<author>
			<firstname>Matthew</firstname>
			<surname>Wakeling</surname>
		</author>
	</authorgroup>
</artheader>

<sect1>
<title>Introduction</title>
<para>
	This document is an attempt to create a workable method of optimising SQL queries to use precalculated tables.
</para>
</sect1>

<itemizedlist>
	<listitem><ulink url="parsing">Parsing a SQL Query</ulink></listitem>
	<listitem><ulink url="usingparsed">Using a parsed query</ulink></listitem>
	<listitem><ulink url="metadata">Meta-data in the database</ulink></listitem>
	<listitem><ulink url="todo">Current status and todo list</ulink></listitem>
</itemizedlist>

<!--<inlinegraphic fileref="arch_pic1" />-->
<inlinegraphic fileref="arch_pic2" />

<sect1>
<title>Data formats present during execution</title>
<para>
	<itemizedlist>
		<listitem>Original query string</listitem>
		<listitem>Original query table aliases, with names</listitem>
		<listitem>Tally of multiple original query table names</listitem>
		<listitem>Original query table aliases, with unique names</listitem>
		<listitem>Original query field aliases, with names</listitem>
		<listitem>Original query where clauses</listitem>
		<listitem>The rest of the original query</listitem>
		<listitem>Mappings that reorder unique original query table names.</listitem>
		<listitem>Reverse mappings of the above</listitem>
		<listitem>SQL Queries to produce lists of useful precomputed tables</listitem>
		<listitem>A set of precomputed table names, to load later</listitem>
		<listitem>Symbolic precomputed table copies, which are a combination of a precomputed table, a mapping to reorder unique original query table names, and the reverse mapping</listitem>
		<listitem>Precomputed table descriptions, including lists of tables and restrictions</listitem>
<!--		<listitem>A set of the symbolic precomputed table copies that are being used currently</listitem>
		<listitem>A mapping from original table aliases to symbolic precomputed table copies that are covering them currently</listitem>
		<listitem>A set of original table where causes that are not needed because they are covered by a symbolic precomputed table copy that is being used currently</listitem>
		-->
		<listitem>Optimised query table aliases and names</listitem>
		<listitem>Optimised query field aliases and names</listitem>
		<listitem>Optimised query restrictions</listitem>
		<listitem>The rest of the optimised query</listitem>
		<listitem>Optimised query string</listitem>
	</itemizedlist>
</para>
</sect1>
</article>
