<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_76) on Wed Apr 06 14:42:59 UTC 2016 -->
<title>DatabaseUtil (intermine-javadoc)</title>
<meta name="date" content="2016-04-06">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DatabaseUtil (intermine-javadoc)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/intermine/sql/DatabaseFactory.html" title="class in org.intermine.sql"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/intermine/sql/DatabaseUtil.html" target="_top">Frames</a></li>
<li><a href="DatabaseUtil.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.intermine.sql</div>
<h2 title="Class DatabaseUtil" class="title">Class DatabaseUtil</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.intermine.sql.DatabaseUtil</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="strong">DatabaseUtil</span>
extends java.lang.Object</pre>
<div class="block">Collection of commonly used Database utilities</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#addColumn(java.sql.Connection,%20java.lang.String,%20java.lang.String,%20org.intermine.sql.DatabaseUtil.Type)">addColumn</a></strong>(java.sql.Connection&nbsp;con,
         java.lang.String&nbsp;tableName,
         java.lang.String&nbsp;columnName,
         <a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)</code>
<div class="block">Add a column to an existing database table, if it does not already exist.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#addColumn(org.intermine.sql.Database,%20java.lang.String,%20java.lang.String,%20org.intermine.sql.DatabaseUtil.Type)">addColumn</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
         java.lang.String&nbsp;tableName,
         java.lang.String&nbsp;columnName,
         <a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)</code>
<div class="block">Add a column in the table specified in input.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#analyse(org.intermine.sql.Database,%20boolean)">analyse</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
       boolean&nbsp;full)</code>
<div class="block">Analyse given database, perform vacuum full analyse if full parameter true.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#analyse(org.intermine.sql.Database,%20org.intermine.metadata.ClassDescriptor,%20boolean)">analyse</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
       org.intermine.metadata.ClassDescriptor&nbsp;cld,
       boolean&nbsp;full)</code>
<div class="block">Analyse database table for a given class and all associated indirection tables.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#columnExists(java.sql.Connection,%20java.lang.String,%20java.lang.String)">columnExists</a></strong>(java.sql.Connection&nbsp;con,
            java.lang.String&nbsp;tableName,
            java.lang.String&nbsp;columnName)</code>
<div class="block">Tests if a column exists in the database</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#createBagTable(org.intermine.sql.Database,%20java.sql.Connection,%20java.lang.String,%20java.util.Collection,%20java.lang.Class)">createBagTable</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
              java.sql.Connection&nbsp;con,
              java.lang.String&nbsp;tableName,
              java.util.Collection&lt;?&gt;&nbsp;bag,
              java.lang.Class&lt;?&gt;&nbsp;c)</code>
<div class="block">Create a new table the holds the contents of the given Collection (bag).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#createBagValuesTables(java.sql.Connection)">createBagValuesTables</a></strong>(java.sql.Connection&nbsp;con)</code>
<div class="block">Create the table 'bagvalues' containing the values of the key field objects
 contained in a bag and an extra values</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#generateSqlCompatibleName(java.lang.String)">generateSqlCompatibleName</a></strong>(java.lang.String&nbsp;n)</code>
<div class="block">Convert any sql keywords to valid names for tables/columns.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getColumnName(org.intermine.metadata.FieldDescriptor)">getColumnName</a></strong>(org.intermine.metadata.FieldDescriptor&nbsp;fd)</code>
<div class="block">Creates a column name for a field descriptor</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getIndirectionTableName(org.intermine.metadata.CollectionDescriptor)">getIndirectionTableName</a></strong>(org.intermine.metadata.CollectionDescriptor&nbsp;col)</code>
<div class="block">Creates an indirection table name for a many-to-many collection descriptor</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Set&lt;java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getIndirectionTableNames(org.intermine.metadata.ClassDescriptor)">getIndirectionTableNames</a></strong>(org.intermine.metadata.ClassDescriptor&nbsp;cld)</code>
<div class="block">Given a ClassDescriptor find names of all related indirection tables.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getInwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor,%20int)">getInwardIndirectionColumnName</a></strong>(org.intermine.metadata.CollectionDescriptor&nbsp;col,
                              int&nbsp;version)</code>
<div class="block">Creates a column name for the "inward" key of a many-to-many collection descriptor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getOutwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor,%20int)">getOutwardIndirectionColumnName</a></strong>(org.intermine.metadata.CollectionDescriptor&nbsp;col,
                               int&nbsp;version)</code>
<div class="block">Creates a column name for the "outward" key of a many-to-many collection descriptor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getTableDefinition(org.intermine.sql.Database,%20org.intermine.metadata.ClassDescriptor)">getTableDefinition</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                  org.intermine.metadata.ClassDescriptor&nbsp;cd)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#getTableName(org.intermine.metadata.ClassDescriptor)">getTableName</a></strong>(org.intermine.metadata.ClassDescriptor&nbsp;cld)</code>
<div class="block">Creates a table name for a class descriptor</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#grant(org.intermine.sql.Database,%20java.lang.String,%20java.lang.String)">grant</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
     java.lang.String&nbsp;user,
     java.lang.String&nbsp;perm)</code>
<div class="block">Grant permission on all tables for given user on specified database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#isBagValuesEmpty(java.sql.Connection)">isBagValuesEmpty</a></strong>(java.sql.Connection&nbsp;con)</code>
<div class="block">Verify if 'bagvalues' table is empty</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#isLegalColumnName(java.lang.String)">isLegalColumnName</a></strong>(java.lang.String&nbsp;name)</code>
<div class="block">Check that a column name provided to us is a legal column name, to prevent SQL injection.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#objectToString(java.lang.Object)">objectToString</a></strong>(java.lang.Object&nbsp;o)</code>
<div class="block">Generate an SQL compatible representation of an object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#removeAllTables(java.sql.Connection)">removeAllTables</a></strong>(java.sql.Connection&nbsp;con)</code>
<div class="block">Removes every single table from the database given.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#removeSequence(java.sql.Connection,%20java.lang.String)">removeSequence</a></strong>(java.sql.Connection&nbsp;con,
              java.lang.String&nbsp;sequence)</code>
<div class="block">Remove the sequence from the database given.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#removeView(java.sql.Connection,%20java.lang.String)">removeView</a></strong>(java.sql.Connection&nbsp;con,
          java.lang.String&nbsp;view)</code>
<div class="block">Remove the view from the database given.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#tableExists(java.sql.Connection,%20java.lang.String)">tableExists</a></strong>(java.sql.Connection&nbsp;con,
           java.lang.String&nbsp;tableName)</code>
<div class="block">Tests if a table exists in the database</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#updateColumnValue(java.sql.Connection,%20java.lang.String,%20java.lang.String,%20java.lang.Object)">updateColumnValue</a></strong>(java.sql.Connection&nbsp;con,
                 java.lang.String&nbsp;tableName,
                 java.lang.String&nbsp;columnName,
                 java.lang.Object&nbsp;newValue)</code>
<div class="block">Set the default value in a column for all values.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#updateColumnValue(org.intermine.sql.Database,%20java.lang.String,%20java.lang.String,%20java.lang.Object)">updateColumnValue</a></strong>(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
                 java.lang.String&nbsp;tableName,
                 java.lang.String&nbsp;columnName,
                 java.lang.Object&nbsp;newValue)</code>
<div class="block">Set the default value in a column for all values where the current value is null.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/intermine/sql/DatabaseUtil.html#verifyColumnType(java.sql.Connection,%20java.lang.String,%20java.lang.String,%20int)">verifyColumnType</a></strong>(java.sql.Connection&nbsp;con,
                java.lang.String&nbsp;tableName,
                java.lang.String&nbsp;columnName,
                int&nbsp;columnType)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="tableExists(java.sql.Connection, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tableExists</h4>
<pre>public static&nbsp;boolean&nbsp;tableExists(java.sql.Connection&nbsp;con,
                  java.lang.String&nbsp;tableName)
                           throws java.sql.SQLException</pre>
<div class="block">Tests if a table exists in the database</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - a connection to a database</dd><dd><code>tableName</code> - the name of a table to test for</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the table exists, false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
<dd><code>java.lang.NullPointerException</code> - if tableName is null</dd></dl>
</li>
</ul>
<a name="columnExists(java.sql.Connection, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>columnExists</h4>
<pre>public static&nbsp;boolean&nbsp;columnExists(java.sql.Connection&nbsp;con,
                   java.lang.String&nbsp;tableName,
                   java.lang.String&nbsp;columnName)
                            throws java.sql.SQLException</pre>
<div class="block">Tests if a column exists in the database</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - a connection to a database</dd><dd><code>tableName</code> - the name of a table containing the column</dd><dd><code>columnName</code> - the name of the column to test for</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if the column exists, false otherwise</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd>
<dd><code>java.lang.NullPointerException</code> - if tableName is null</dd></dl>
</li>
</ul>
<a name="removeAllTables(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAllTables</h4>
<pre>public static&nbsp;void&nbsp;removeAllTables(java.sql.Connection&nbsp;con)
                            throws java.sql.SQLException</pre>
<div class="block">Removes every single table from the database given.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - the Connection to the database</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd></dl>
</li>
</ul>
<a name="removeSequence(java.sql.Connection, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeSequence</h4>
<pre>public static&nbsp;void&nbsp;removeSequence(java.sql.Connection&nbsp;con,
                  java.lang.String&nbsp;sequence)
                           throws java.sql.SQLException</pre>
<div class="block">Remove the sequence from the database given.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - the Connection to the database</dd><dd><code>sequence</code> - the sequence to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd></dl>
</li>
</ul>
<a name="removeView(java.sql.Connection, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeView</h4>
<pre>public static&nbsp;void&nbsp;removeView(java.sql.Connection&nbsp;con,
              java.lang.String&nbsp;view)
                       throws java.sql.SQLException</pre>
<div class="block">Remove the view from the database given.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - the Connection to the database</dd><dd><code>view</code> - the view to remove</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if an error occurs in the underlying database</dd></dl>
</li>
</ul>
<a name="getTableName(org.intermine.metadata.ClassDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTableName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getTableName(org.intermine.metadata.ClassDescriptor&nbsp;cld)</pre>
<div class="block">Creates a table name for a class descriptor</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cld</code> - ClassDescriptor</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid table name</dd></dl>
</li>
</ul>
<a name="getColumnName(org.intermine.metadata.FieldDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getColumnName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getColumnName(org.intermine.metadata.FieldDescriptor&nbsp;fd)</pre>
<div class="block">Creates a column name for a field descriptor</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fd</code> - FieldDescriptor</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid column name</dd></dl>
</li>
</ul>
<a name="getIndirectionTableName(org.intermine.metadata.CollectionDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndirectionTableName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getIndirectionTableName(org.intermine.metadata.CollectionDescriptor&nbsp;col)</pre>
<div class="block">Creates an indirection table name for a many-to-many collection descriptor</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>col</code> - CollectionDescriptor</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid table name</dd></dl>
</li>
</ul>
<a name="getInwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInwardIndirectionColumnName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getInwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor&nbsp;col,
                                              int&nbsp;version)</pre>
<div class="block">Creates a column name for the "inward" key of a many-to-many collection descriptor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>col</code> - CollectionDescriptor</dd><dd><code>version</code> - the database version number</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid column name</dd></dl>
</li>
</ul>
<a name="getOutwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutwardIndirectionColumnName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getOutwardIndirectionColumnName(org.intermine.metadata.CollectionDescriptor&nbsp;col,
                                               int&nbsp;version)</pre>
<div class="block">Creates a column name for the "outward" key of a many-to-many collection descriptor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>col</code> - CollectionDescriptor</dd><dd><code>version</code> - the database version number</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid column name</dd></dl>
</li>
</ul>
<a name="generateSqlCompatibleName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>generateSqlCompatibleName</h4>
<pre>public static&nbsp;java.lang.String&nbsp;generateSqlCompatibleName(java.lang.String&nbsp;n)</pre>
<div class="block">Convert any sql keywords to valid names for tables/columns.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>n</code> - the string to convert</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid sql name</dd></dl>
</li>
</ul>
<a name="objectToString(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>objectToString</h4>
<pre>public static&nbsp;java.lang.String&nbsp;objectToString(java.lang.Object&nbsp;o)</pre>
<div class="block">Generate an SQL compatible representation of an object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>o</code> - the Object</dd>
<dt><span class="strong">Returns:</span></dt><dd>a valid SQL String</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalArgumentException</code> - if the object is not representable</dd></dl>
</li>
</ul>
<a name="analyse(org.intermine.sql.Database, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>analyse</h4>
<pre>public static&nbsp;void&nbsp;analyse(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
           boolean&nbsp;full)
                    throws java.sql.SQLException</pre>
<div class="block">Analyse given database, perform vacuum full analyse if full parameter true.
 WARNING: currently PostgreSQL specific</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - the database to analyse</dd><dd><code>full</code> - if true perform VACUUM FULL ANALYSE</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if db problem</dd></dl>
</li>
</ul>
<a name="analyse(org.intermine.sql.Database, org.intermine.metadata.ClassDescriptor, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>analyse</h4>
<pre>public static&nbsp;void&nbsp;analyse(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
           org.intermine.metadata.ClassDescriptor&nbsp;cld,
           boolean&nbsp;full)
                    throws java.sql.SQLException</pre>
<div class="block">Analyse database table for a given class and all associated indirection tables.
 WARNING: currently PostgreSQL specific</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - the database to analyse</dd><dd><code>cld</code> - description of class to analyse</dd><dd><code>full</code> - if true perform VACUUM FULL ANALYSE</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if db problem</dd></dl>
</li>
</ul>
<a name="getIndirectionTableNames(org.intermine.metadata.ClassDescriptor)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndirectionTableNames</h4>
<pre>public static&nbsp;java.util.Set&lt;java.lang.String&gt;&nbsp;getIndirectionTableNames(org.intermine.metadata.ClassDescriptor&nbsp;cld)</pre>
<div class="block">Given a ClassDescriptor find names of all related indirection tables.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cld</code> - class to find tables for</dd>
<dt><span class="strong">Returns:</span></dt><dd>a set of all indirection table names</dd></dl>
</li>
</ul>
<a name="grant(org.intermine.sql.Database, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>grant</h4>
<pre>public static&nbsp;void&nbsp;grant(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
         java.lang.String&nbsp;user,
         java.lang.String&nbsp;perm)
                  throws java.sql.SQLException</pre>
<div class="block">Grant permission on all tables for given user on specified database.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - the database to grant permissions on</dd><dd><code>user</code> - the username to grant permission to</dd><dd><code>perm</code> - permission to grant</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if db problem</dd></dl>
</li>
</ul>
<a name="createBagTable(org.intermine.sql.Database, java.sql.Connection, java.lang.String, java.util.Collection, java.lang.Class)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBagTable</h4>
<pre>public static&nbsp;void&nbsp;createBagTable(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                  java.sql.Connection&nbsp;con,
                  java.lang.String&nbsp;tableName,
                  java.util.Collection&lt;?&gt;&nbsp;bag,
                  java.lang.Class&lt;?&gt;&nbsp;c)
                           throws java.sql.SQLException</pre>
<div class="block">Create a new table the holds the contents of the given Collection (bag).  The "Class c"
 parameter selects which objects from the bag are put in the new table.  eg. if the bag
 contains Integers and Strings and the parameter is Integer.class then the table will contain
 only the Integers from the bag.  A Class of InterMineObject is handled specially: the new
 table will contain the IDs of the objects, not the objects themselves.  The table will have
 one column ("value").</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - the Database to access</dd><dd><code>con</code> - the Connection to use</dd><dd><code>tableName</code> - the name to use for the new table</dd><dd><code>bag</code> - the Collection to create a table for</dd><dd><code>c</code> - the type of objects to put in the new table</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd></dl>
</li>
</ul>
<a name="createBagValuesTables(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createBagValuesTables</h4>
<pre>public static&nbsp;void&nbsp;createBagValuesTables(java.sql.Connection&nbsp;con)
                                  throws java.sql.SQLException</pre>
<div class="block">Create the table 'bagvalues' containing the values of the key field objects
 contained in a bag and an extra values</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - the Connection to use</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd></dl>
</li>
</ul>
<a name="isBagValuesEmpty(java.sql.Connection)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBagValuesEmpty</h4>
<pre>public static&nbsp;boolean&nbsp;isBagValuesEmpty(java.sql.Connection&nbsp;con)
                                throws java.sql.SQLException</pre>
<div class="block">Verify if 'bagvalues' table is empty</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - the Connection to use</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if empty</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd></dl>
</li>
</ul>
<a name="addColumn(org.intermine.sql.Database, java.lang.String, java.lang.String, org.intermine.sql.DatabaseUtil.Type)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addColumn</h4>
<pre>public static&nbsp;void&nbsp;addColumn(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
             java.lang.String&nbsp;tableName,
             java.lang.String&nbsp;columnName,
             <a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)
                      throws java.sql.SQLException</pre>
<div class="block">Add a column in the table specified in input. A connection is obtained to the database
 and automatically released after the addition of the column.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>database</code> - the database to use</dd><dd><code>tableName</code> - the table where to add the column</dd><dd><code>columnName</code> - the column to add</dd><dd><code>type</code> - the type</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd></dl>
</li>
</ul>
<a name="addColumn(java.sql.Connection, java.lang.String, java.lang.String, org.intermine.sql.DatabaseUtil.Type)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addColumn</h4>
<pre>public static&nbsp;void&nbsp;addColumn(java.sql.Connection&nbsp;con,
             java.lang.String&nbsp;tableName,
             java.lang.String&nbsp;columnName,
             <a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql">DatabaseUtil.Type</a>&nbsp;type)
                      throws java.sql.SQLException</pre>
<div class="block">Add a column to an existing database table, if it does not already exist.
 It is the users responsibility to close the connection after use.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - A connection to the database.</dd><dd><code>tableName</code> - The table to add the database too</dd><dd><code>columnName</code> - The column to add</dd><dd><code>type</code> - The SQL type to add</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if something goes wrong</dd></dl>
</li>
</ul>
<a name="isLegalColumnName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLegalColumnName</h4>
<pre>protected static&nbsp;boolean&nbsp;isLegalColumnName(java.lang.String&nbsp;name)</pre>
<div class="block">Check that a column name provided to us is a legal column name, to prevent SQL injection.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>name</code> - The desired column name.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Whether or not we should accept it.</dd></dl>
</li>
</ul>
<a name="updateColumnValue(org.intermine.sql.Database, java.lang.String, java.lang.String, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateColumnValue</h4>
<pre>public static&nbsp;void&nbsp;updateColumnValue(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;database,
                     java.lang.String&nbsp;tableName,
                     java.lang.String&nbsp;columnName,
                     java.lang.Object&nbsp;newValue)
                              throws java.sql.SQLException</pre>
<div class="block">Set the default value in a column for all values where the current value is null.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>database</code> - the database to use</dd><dd><code>tableName</code> - the table where update the column</dd><dd><code>columnName</code> - the column to Update</dd><dd><code>newValue</code> - the value to update</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem</dd></dl>
</li>
</ul>
<a name="updateColumnValue(java.sql.Connection, java.lang.String, java.lang.String, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateColumnValue</h4>
<pre>public static&nbsp;void&nbsp;updateColumnValue(java.sql.Connection&nbsp;con,
                     java.lang.String&nbsp;tableName,
                     java.lang.String&nbsp;columnName,
                     java.lang.Object&nbsp;newValue)
                              throws java.sql.SQLException</pre>
<div class="block">Set the default value in a column for all values.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - A connection to the database to use</dd><dd><code>tableName</code> - the table where update the column</dd><dd><code>columnName</code> - the column to Update</dd><dd><code>newValue</code> - the value to update</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code> - if there is a database problem

 Note, it is the user's responsibility to ensure the connection given is closed.</dd></dl>
</li>
</ul>
<a name="verifyColumnType(java.sql.Connection, java.lang.String, java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyColumnType</h4>
<pre>public static&nbsp;boolean&nbsp;verifyColumnType(java.sql.Connection&nbsp;con,
                       java.lang.String&nbsp;tableName,
                       java.lang.String&nbsp;columnName,
                       int&nbsp;columnType)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>con</code> - database connection</dd><dd><code>tableName</code> - table name</dd><dd><code>columnName</code> - column name</dd><dd><code>columnType</code> - column type</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if column exists</dd></dl>
</li>
</ul>
<a name="getTableDefinition(org.intermine.sql.Database, org.intermine.metadata.ClassDescriptor)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getTableDefinition</h4>
<pre>public static&nbsp;java.lang.String&nbsp;getTableDefinition(<a href="../../../org/intermine/sql/Database.html" title="class in org.intermine.sql">Database</a>&nbsp;db,
                                  org.intermine.metadata.ClassDescriptor&nbsp;cd)
                                           throws java.lang.ClassNotFoundException</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>db</code> - database</dd><dd><code>cd</code> - class descriptor</dd>
<dt><span class="strong">Returns:</span></dt><dd>SQL to create table</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.ClassNotFoundException</code> - table isn't in database</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/intermine/sql/DatabaseFactory.html" title="class in org.intermine.sql"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/intermine/sql/DatabaseUtil.Type.html" title="enum in org.intermine.sql"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/intermine/sql/DatabaseUtil.html" target="_top">Frames</a></li>
<li><a href="DatabaseUtil.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
